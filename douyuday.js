const roomidArr = [
        '606118',
        // '96291',
        // '71017',
        // '2947432',
        // '1983057',
        // '3168536',
        // '9999',
        // "74960", "1165924", "532152", "12306", "319538", "787579", "4496475", 
        // "93589", "110", "461130", "52319", "58260", "525207", "48699", "30",
        // "249650", "633980", "4811710", "421065", "5087273", "60062", "1065655", "605964", "5106536", "600290", "494102", "329364", "24418", "718133", "1747028", "571881", "12776", "35954", "269666", "1746691", "488744", "1746982", "68172", "4387092", "1747104", "891464", "2384775", "1724550", "544865", "297535", "882852", "603144", "66197", "85513", "514974", "1498004", "562007", "1747051", "3630850", "5030257", "5029720", "83172", "1879439", "1747046", "122024", "1746967", "3259811", "1918229", "234130", "1746992", "1746996", "1746964", "1746730", "3259793", "4533200", "3246260", "1746946", "423544", "1746652", "676552", "4644759", "1746678", "236866", "6310", "105441", "635434", "1560240", "93936", "957090", "3692417", "1746956", "4881974", "1746707", "2236160", "1746926", "2561707", "1746670", "2707290", "1746607", "677683", "1746696",
        // "276685", "74751", "56040", "3662665", "687423", "84452", "467847", "1679347", "262877", "2142758", "2311698", "229743", "217331", "61372", "620023", "5038014", "2140934", "83379", "6906", "723862", "139277", "1589636", "111084", "501761", "3742334", "4779159", "557171", "5065043", "702151", "530716", "441582", "4032845", "60651", "36140", "284550", "172392", "2805646", "57793", "3814027", "3768242", "2353159", "3562621", "4330332", "1930742", "572962", "1909897", "2462784", "4167814", "4327459", "1203481", "648522", "2108063", "3797946", "639009", "436626", "486448", "1746242", "67761", "3903578", "3943095", "5116408", "2383433", "1344290", "3888867", "190946", "85105", "932978", "2138443", "1067772", "491412", "2133151", "2727054", "74763", "311965", "4407731", "105152", "4764952", "1991332", "1629239", "1055765", "2906233", "170587", "2266623", "701579", "1504768", "4352268", "3911175", "3853032", "649567", "2223144", "251519", "67205", "4847915", "4817362", "1251956", "3289720", "944488", "520511", "4330065", "3643761",
        // "4921614", "459094", "1811143", "2207607", "4439937", "540357", "1918013", "74706", "2082749", "3018149", "1849364", "1863767", "2110203", "796666", "2095925", "1294569", "952595", "4329747", "3366797", "3857053", "1983057", "221869", "300165", "889024", "5040227", "84835", "4323602", "718642", "147887", "4350043", "2150758", "244119", "781752", "2707841", "147398", "921393", "3628504", "2002708", "3699862", "4661529", "1571223", "3605965", "4545645", "250483", "4337494", "324392", "258718", "3843483", "3653606", "1408357", "2863486", "3084150", "555203", "2045506", "3870456", "4789123", "1937174", "1038538", "1101539", "5088903", "105421", "3959607", "4337192", "5049544", "1370315", "4320170", "4333916", "662991", "2618884", "4392373", "2619930", "4942273", "4785477", "58451", "145201", "59673", "4085714", "3281795", "624958", "298982", "5047220", "2182771", "4344912", "221741", "2294903", "75107", "2004384", "3724392", "4337912", "4613290", "4836270", "1630167", "1526153", "3653335", "4869172", "4243676", "2044532", "5095770", "181724", "3959361",
        // "1630847", "182102", "430489", "4625893", "796449", "122402", "85829", "176341", "248753", "252802", "85894", "547162", "218859", "1221923", "468241", "2423653", "206858", "848337", "1910856", "318624", "2046501", "491416", "638575", "4529297", "131197", "1197627", "5423", "2549450", "96577", "276200", "1536826", "517927", "1010383", "1557505", "36337", "757122", "20415", "2346676", "6540", "315457", "831528", "101217", "287471", "310926", "52787", "59612", "4668223", "4482867", "195790", "1488293", "4368821", "170792", "798504", "677406", "924327", "1443964", "3928", "828705", "3734479", "2492360", "524757", "2277357", "748084", "1345550", "125003", "4328250", "3982761", "1611559", "4595371", "4537210", "7127", "4775361", "504864", "914149", "2698253", "1525851", "209215", "4711247", "4386404", "243306", "3375775", "554494", "2654953", "3553322", "4332", "71590", "1689779", "1214860", "569349", "806928", "4896810", "868930", "1569773", "675072", "454867", "4512292", "5032804", "5024084", "4246519", "1127072",
        // "3946671", "2151448", "2136878", "3279944", "5075754", "3775431", "1125263", "4593424", "3318573", "4597051", "4551202", "4793076", "963308", "742994", "5014946", "822764", "974047", "3741595", "3242260", "5046315", "2141766", "3392000", "3274355", "4792035", "2622693", "3821363", "5013185", "4665868", "4814524", "4925282", "1551804", "2307031", "3849631", "1652721", "3539509", "1517679", "4724184", "4778066", "5079271", "4547897", "4243080", "4638944", "4669412", "4601196", "2002312", "1097999", "1454009", "627904", "3300407", "4178497", "4720399", "4762150", "3452063", "4269809", "4699574", "4108896", "950805", "4383671", "5013656", "3556154", "5094832", "4248540", "2062692", "4543046", "3559730", "1517451", "4793870", "3806982", "4805826", "4720055", "1295864", "556433", "3451830", "4843138", "4913382", "4806330", "2584618", "4887890", "4771447", "3723676", "5127986", "4629277", "4848435", "5073942", "1022157", "1904106", "4557148", "4898904", "4892846", "2974285", "5049461", "68655", "4828604", "4579277", "2165717", "4665840", "4816871", "4460612", "4798658", "463508",
        // "2132902", "5113176", "540910", "95741", "4636959", "4262598", "2472169", "424998", "1034713", "434213", "444146", "5028934", "577094", "433184", "2181701", "810226", "304391", "119790", "416499", "478884", "870188", "545318", "444360", "2259748", "734565", "652458", "2320076", "63279", "1440379", "3729436", "2206658", "548634", "52678", "1842800", "2183003", "1185644", "3090650", "2048466", "961020", "444708", "3500556", "1877962", "2012813", "321987", "1546336", "4384116", "1177159", "2217943", "4429065", "506007", "463938", "4850617", "591801", "2394909", "852673", "285379", "1089406", "721217", "227670", "508118", "1212690", "436240", "589612", "1432054", "451787", "2286279", "4296484", "1706950", "1339207", "3794765", "1952221", "1259629", "873443", "1827051", "466788", "2186357", "3448149", "4333645", "1835100", "516089", "1343255", "770844", "4910429", "1302198", "508456", "3772385", "1822829", "265593", "500228", "2777630", "1916640", "3528704", "577168", "3587953", "4034415", "2001561", "643871", "3339482", "695715", "1935419",
        // "2353761", "653829", "579498", "280463", "2051825", "4431370", "526792", "1555703", "2653313", "668319", "2390615", "1828565", "4689014", "5018050", "576838", "5024627", "5126006", "4801775", "5122391", "5113738", "4800670", "4670352", "4718698", "5064114", "5088365", "1090935", "4016995", "1440789", "3866549", "2173228", "3630723", "5139358", "3909848", "5139431", "5139674", "1606716", "476984", "3568703", "5139337", "5139340", "5139343", "5139350", "5139351", "5139352", "5139356", "5139359", "5139364", "5139366", "5139369", "5139370", "5139371", "5139372", "5139373", "5139374", "5139376", "5139377", "5139379", "5139380", "5139381", "5139382", "5139384", "5139385", "5139388", "5139391", "5139402", "5139406",
    ]


const _config_url = {
    room : 'http://open.douyucdn.cn/api/RoomApi/room/'
}


const douyu = {
    init(){
        console.log("huya---start")
        let _t = this;
        for (const roomId of roomidArr) {
            let _url = `${_config_url.room}${roomId}`
            let _options = selectProxy(_url)

            getData(_options,function(data){
                _t.handle(data,roomId)
            });
        }
    },
    handle(data,roomId){
        try{
            let json = JSON.parse(data).data
            let _data = {
                'type': 'userInfo',
                'platform': 'douyu',  
                'roomId': `${roomId}`, 
                'online': json.hn,
                'fans': json.fans_num,
                'name': json.owner_name
            }
            sendData(_data)
        }catch(e){}
        

    }
}

module.exports = douyu